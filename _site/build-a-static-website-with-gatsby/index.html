<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="Full-Stack Developer, Programming, Machine Learning, IoT"><meta name="theme-color" content="#000000"><title>Build a static website with Gatsby and TypeScript | Jirawat Boonkumnerd</title><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="Build a static website with Gatsby and TypeScript" /><meta name="author" content="ntsd" /><meta property="og:locale" content="en_US" /><meta name="description" content="Install Gatsby" /><meta property="og:description" content="Install Gatsby" /><link rel="canonical" href="https://ntsd.me/build-a-static-website-with-gatsby/" /><meta property="og:url" content="https://ntsd.me/build-a-static-website-with-gatsby/" /><meta property="og:site_name" content="Jirawat Boonkumnerd" /><meta property="og:image" content="https://ntsd.me/pwa/icons/512.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-11T19:30:54+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="https://ntsd.me/pwa/icons/512.png" /><meta property="twitter:title" content="Build a static website with Gatsby and TypeScript" /><meta name="twitter:site" content="@ntsd_me" /><meta name="twitter:creator" content="@ntsd" /><meta property="fb:admins" content="jo.ntsd" /><meta property="article:publisher" content="ntsd.me" /><meta property="fb:app_id" content="523337598616322" /> <script type="application/ld+json"> {"dateModified":"2020-03-11T19:30:54+07:00","image":"https://ntsd.me/pwa/icons/512.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://ntsd.me/build-a-static-website-with-gatsby/"},"url":"https://ntsd.me/build-a-static-website-with-gatsby/","author":{"@type":"Person","name":"ntsd"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ntsd.me/pwa/icons/512.png"},"name":"ntsd"},"description":"Install Gatsby","headline":"Build a static website with Gatsby and TypeScript","@type":"BlogPosting","datePublished":"2020-03-11T19:30:54+07:00","@context":"https://schema.org"}</script><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="manifest" href="/pwa/manifest.json" defer><link rel="stylesheet" href="/css/ntsd-blog.min.css" defer><link rel="shortcut icon" href="/favicon.ico" defer><link rel="apple-touch-icon" href="/favicon.ico" defer> <script></script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Jirawat Boonkumnerd</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li> <a href="/">Home</a><li> <a href="/categories/">Categories</a><li> <a href="/portfolio/">Portfolio</a><li> <a href="/tags/">Tags</a></ul></div></div></div></nav><script> var $body = document.body; var $toggle = document.querySelector('.navbar-toggle'); var $navbar = document.querySelector('#huxblog_navbar'); var $collapse = document.querySelector('.navbar-collapse'); var __HuxNav__ = { close: function(){ $navbar.className = " "; setTimeout(function() { if($navbar.className.indexOf('in') < 0) { $collapse.style.height = "0px"; } }, 400); }, open: function() { $collapse.style.height = "auto"; $navbar.className += " in"; } }; $toggle.addEventListener('click', function(e) { if ($navbar.className.indexOf('in') > 0) { __HuxNav__.close(); } else{ __HuxNav__.open(); } }); document.addEventListener('click', function(e){ if(e.target == $toggle) return; if(e.target.className == 'icon-bar') return; __HuxNav__.close(); }); </script><style type="text/css"> header.intro-header { position: relative; background-image: url('/img/post-bg-os-metro.jpg'); }</style><header class="intro-header" ><div class="intro-header-inner"><div class="header-mask"></div><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"> <span class="categories"> <a class="category" href="/categories/#Programming" title="Programming">Programming</a> </span> <span class="tags"> <a class="tag" href="/tags/#Programming" title="Programming">Programming</a> <a class="tag" href="/tags/#Gatsby" title="Gatsby">Gatsby</a> <a class="tag" href="/tags/#React" title="React">React</a> <a class="tag" href="/tags/#GraphQL" title="GraphQL">GraphQL</a> <a class="tag" href="/tags/#Progressive Web App" title="Progressive Web App">Progressive Web App</a> <a class="tag" href="/tags/#TypeScript" title="TypeScript">TypeScript</a> </span><h1>Build a static website with Gatsby and TypeScript</h1><h2 class="subheading">A complete guide to build a high-performance static website with Gatsby and get 100% score on Google Lighthouse</h2><span class="meta">Posted by ntsd on March 11, 2020</span></div></div></div></div></div></header><article><div class="container"><div class="row"><div class=" col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><h2 id="install-gatsby">Install Gatsby</h2><p>if you’re a beginner you should follow the getting start from Gatsby</p><p><a href="https://www.gatsbyjs.org/docs/quick-start/">https://www.gatsbyjs.org/docs/quick-start/</a></p><p>I’ll skip this step because it’s too easy just follow the guide</p><pre><code class="language-Shell"># Install the Gatsby CLI
npm install -g gatsby-cli

# Create a new site
gatsby new gatsby-site

# Change directories into site folder
cd gatsby-site

# gatsby develop
gatsby develop
</code></pre><p>now you’ll get the Gatsby default page</p><p><img src="/img/in-post/2020-3-11-build-a-static-website-with-gatsby/1.png" alt="now you'll get the Gatsby default page" /></p><h2 id="add-typescript-support">Add TypeScript support</h2><p>Install <code class="highlighter-rouge">gatsby-plugin-typescript</code> and <code class="highlighter-rouge">typeScript</code> dependencies</p><pre><code class="language-Shell">npm install gatsby-plugin-typescript
npm install -D typescript
</code></pre><p>Change all .js file to .tsx</p><p>Add “gatsby-plugin-typescript” to gatsby-config.js</p><pre><code class="language-JS">plugins: [`gatsby-plugin-typescript`]
</code></pre><p>Add typescript eslint</p><p>new files <code class="highlighter-rouge">tsconfig.json</code> and <code class="highlighter-rouge">.eslintrc.js</code> to the root project directory</p><p>To generate <code class="highlighter-rouge">tsconfig.json</code> you can use this script to generate a sample config</p><pre><code class="language-Shell">./node_modules/typescript/bin/tsc --init
</code></pre><p>tsconfig.json</p><pre><code class="language-JS">{
  "compilerOptions": {
    "module": "commonjs",
    "target": "esnext",
    "jsx": "preserve",
    "lib": ["dom", "esnext"],
    "strict": true,
    "noEmit": true,
    "isolatedModules": true,
    "esModuleInterop": true,
    "noUnusedLocals": false,
    "allowJs": true
  },
  "exclude": ["node_modules", "public", ".cache"]
}
</code></pre><p>edit <code class="highlighter-rouge">.eslintrc.js</code></p><p>you can enable or disable rules as you want</p><pre><code class="language-JS">module.exports = {
  parser: '@typescript-eslint/parser', // Specifies the ESLint parser
  extends: [
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended',
    'prettier/@typescript-eslint',
    'plugin:prettier/recommended'
  ],
  settings: {
    react: {
      version: 'detect'
    }
  },
  env: {
    browser: true,
    node: true,
    es6: true
  },
  plugins: ['@typescript-eslint', 'react'],
  parserOptions: {
    ecmaFeatures: {
      jsx: true
    },
    ecmaVersion: 2018, // Allows for the parsing of modern ECMAScript features
    sourceType: 'module' // Allows for the use of imports
  },
  rules: {
    'react/prop-types': 'off', // Disable prop-types as we use TypeScript for type checking
    '@typescript-eslint/explicit-function-return-type': 'off'
  },
  overrides: [
    // Override some TypeScript rules just for .js files
    {
      files: ['*.js'],
      rules: {
        '@typescript-eslint/no-var-requires': 'off'
      }
    }
  ]
};
</code></pre><p>Install <code class="highlighter-rouge">eslint</code> and <code class="highlighter-rouge">typescript</code> packages to dev dependencies</p><pre><code class="language-Shell">npm install -D @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint
</code></pre><p>Now you need to refactor all codes to fix TypeScript lint errors</p><h2 id="setup-progressive-web-app">Setup Progressive Web App</h2><p>Install <code class="highlighter-rouge">gatsby-plugin-manifest</code> plugin to allow gatsby use <a href="https://www.w3.org/TR/appmanifest/">Web App Manifest</a></p><p>Web App Manifest will allow users to save PWA app to the home screen</p><p>and it includes information like the Web App’s name, icons, start_url, background-color and <a href="https://web.dev/add-manifest/">more</a></p><pre><code class="language-Shell">npm install gatsby-plugin-manifest
</code></pre><p>then you can config Web App Manifest in <code class="highlighter-rouge">gatsby-config.js</code></p><pre><code class="language-JS">module.exports = {
  plugins: [
    {
      resolve: `gatsby-plugin-manifest`,
      options: {
        name: `gatsby-starter-default`,
        short_name: `starter`,
        start_url: `/`,
        background_color: `#663399`,
        theme_color: `#663399`,
        display: `minimal-ui`,
        icon: `src/images/gatsby-icon.png`, // This path is relative to the root of the site.
      },
    },
  ],
}
</code></pre><p>Add <code class="highlighter-rouge">gatsby-plugin-offline</code> to make the site work offline</p><pre><code class="language-Shell">npm install --save gatsby-plugin-offline
</code></pre><p>Add <code class="highlighter-rouge">gatsby-plugin-offline</code> to plugins in <code class="highlighter-rouge">gatsby-config.js</code></p><p>Gatsby will generate <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Worker</a> to make it offline support and cache the page</p><p>you can read the <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-offline#available-options">available options</a> to change the config</p><h2 id="deploy-to-netlify">Deploy to Netlify</h2><p>In your Netlify dashboard New site from Git</p><p><img src="/img/in-post/2020-3-11-build-a-static-website-with-gatsby/2.png" alt="New site from Git" /></p><p>choose your repository in Github or Gitlab to deploy</p><p>and the default setting should work</p><p>set Build command to <code class="highlighter-rouge">gatsby build</code></p><p>set Publish directory to <code class="highlighter-rouge">public/</code></p><p><img src="/img/in-post/2020-3-11-build-a-static-website-with-gatsby/3.png" alt="Setup netlify" /></p><p>Finish!! the web will deploy to Netlify static host</p><p>The web will automatically deploy when you update the master branch</p><p>Audits Google Lighthouse score with Google Chrome</p><p>open inspect mode</p><p>go to audits tab</p><p>click generate report</p><p><img src="/img/in-post/2020-3-11-build-a-static-website-with-gatsby/4.png" alt="Setup netlify" /></p><p>Wow! you get max score</p><h2 id="references">References</h2><ul><li><a href="https://www.gatsbyjs.org/">https://www.gatsbyjs.org/</a><li><a href="https://blog.logrocket.com/set-up-a-typescript-gatsby-app/">https://blog.logrocket.com/set-up-a-typescript-gatsby-app/</a></ul><hr style="visibility: hidden;"><ul class="pager"><li class="previous"> <a href="/install-openwrt-on-banana-pi-r64/" data-toggle="tooltip" data-placement="top" title="Build and Install OpenWRT on Banana Pi R64"> Previous<br> <span>Build and Install OpenWRT on Banana Pi R64</span> </a><li class="next"> <a href="/add-facebook-comments-to-your-website/" data-toggle="tooltip" data-placement="top" title="Add Facebook comments to a website in 5 minutes"> Next<br> <span>Add Facebook comments to a website in 5 minutes</span> </a></ul></div><div class=" col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"><div class="side-catalog"><h5> <a class="catalog-toggle" href="#">Contents</a></h5><ul class="catalog-body"></ul></div></div><div class=" col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"> <a href="/tags/#General" title="General" rel="1"> General </a> <a href="/tags/#Artificial Intelligence" title="Artificial Intelligence" rel="1"> Artificial Intelligence </a> <a href="/tags/#Programming" title="Programming" rel="6"> Programming </a> <a href="/tags/#Python" title="Python" rel="2"> Python </a> <a href="/tags/#Code golf" title="Code golf" rel="1"> Code golf </a> <a href="/tags/#C++" title="C++" rel="1"> C++ </a> <a href="/tags/#aria2" title="aria2" rel="1"> aria2 </a> <a href="/tags/#Network" title="Network" rel="2"> Network </a> <a href="/tags/#OpenWRT" title="OpenWRT" rel="1"> OpenWRT </a> <a href="/tags/#Router" title="Router" rel="1"> Router </a> <a href="/tags/#Embedded" title="Embedded" rel="1"> Embedded </a> <a href="/tags/#Gatsby" title="Gatsby" rel="1"> Gatsby </a> <a href="/tags/#React" title="React" rel="1"> React </a> <a href="/tags/#GraphQL" title="GraphQL" rel="1"> GraphQL </a> <a href="/tags/#Progressive Web App" title="Progressive Web App" rel="1"> Progressive Web App </a> <a href="/tags/#TypeScript" title="TypeScript" rel="2"> TypeScript </a> <a href="/tags/#Facebook Developer" title="Facebook Developer" rel="1"> Facebook Developer </a> <a href="/tags/#ESLint" title="ESLint" rel="1"> ESLint </a> <a href="/tags/#Hosting" title="Hosting" rel="1"> Hosting </a> <a href="/tags/#Website" title="Website" rel="1"> Website </a> <a href="/tags/#Web Performance" title="Web Performance" rel="1"> Web Performance </a></div></section></div></div></div></article><script> function async(u, c) { var d = document, t = 'script', o = d.createElement(t), s = d.getElementsByTagName(t)[0]; o.src = u; if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); } s.parentNode.insertBefore(o, s); } </script> <script> async("https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){ anchors.options = { visible: 'always', placement: 'right', icon: '#' }; anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5'); }) </script><style> /* place left on bigger screen */ @media all and (min-width: 800px) { .anchorjs-link{ position: absolute; left: -0.75em; font-size: 1.1em; margin-top : -0.1em; } }</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li> <a target="_blank" href="https://www.facebook.com/jo.ntsd" aria-label="Facebook" rel="noopener noreferrer"> <svg class="svg-icon logo-facebook"></svg> </a><li> <a target="_blank" href="https://github.com/ntsd" aria-label="Github" rel="noopener noreferrer"> <svg class="svg-icon logo-github"></svg> </a><li> <a target="_blank" href="https://www.linkedin.com/in/ntsd" aria-label="Linkedin" rel="noopener noreferrer"> <svg class="svg-icon logo-linkedin"></svg> </a></ul><div class="copyright"><div> Copyright &copy; Jirawat Boonkumnerd 2020</div><div> Made with ❤️ by <a href="https://ntsd.me">ntsd</a></div></div></div></div></div></footer><script src="/js/snackbar.min.js" defer></script> <script src="/js/sw-registration.min.js" defer></script> <script> function async(u, c) { var d = document, t = 'script', o = d.createElement(t), s = d.getElementsByTagName(t)[0]; o.src = u; if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); } s.parentNode.insertBefore(o, s); } function asyncStyle(u) { var d = document, t = 'link', o = d.createElement(t), s = d.getElementsByTagName(t)[0]; o.href = u; o.rel="stylesheet"; s.parentNode.insertBefore(o, s); } </script> <script src="/js/jquery.min.js"></script> <script src="/js/ntsd-blog.min.js" defer></script> <script> async("/js/prism.min.js"); asyncStyle("/css/prism.min.css"); </script> <script type="text/javascript"> function generateCatalog (selector) { /* interop with multilangual */ if ('' == 'true') { _containerSelector = 'div.post-container.active'; } else { _containerSelector = 'div.post-container'; } /* init */ var P = $(_containerSelector),a,n,t,l,i,c; /* side catalog level */ a = P.find('h1,h2'); /* clean */ $(selector).html(''); /* appending */ a.each(function () { n = $(this).prop('tagName').toLowerCase(); i = "#"+$(this).prop('id'); t = $(this).text(); c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>'); l = $('<li class="'+n+'_nav">').append(c); $(selector).append(l); }); return true; } generateCatalog(".catalog-body"); /* toggle side catalog */ $(".catalog-toggle").click((function(e) { e.preventDefault(); $('.side-catalog').toggleClass("fold"); })); /* Doc: https://github.com/davist11/jQuery-One-Page-Nav Fork by Hux to support padding */ async("/js/jquery.nav.min.js", function () { $('.catalog-body').onePageNav({ currentClass: "active", changeHash: !1, easing: "swing", filter: "", scrollSpeed: 700, scrollOffset: 0, scrollThreshold: .2, begin: null, end: null, scrollChange: null, padding: 80 }); }); </script>
